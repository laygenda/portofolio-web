{"version":3,"file":"index-CqFS6gMj.js","sources":["../../src/constants.ts","../../src/hooks/useColorScheme.ts","../../src/hooks/useLoadingAnimation.ts","../../src/hooks/usePrefersReducedMotion.ts","../../src/lib/calendar.ts","../../src/lib/label.ts","../../src/lib/theme.ts","../../src/styles/styles.ts","../../src/components/ActivityCalendar.tsx"],"sourcesContent":["export const NAMESPACE = 'react-activity-calendar'\nexport const LABEL_MARGIN = 8 // px\n\nexport const DEFAULT_MONTH_LABELS = [\n  'Jan',\n  'Feb',\n  'Mar',\n  'Apr',\n  'May',\n  'Jun',\n  'Jul',\n  'Aug',\n  'Sep',\n  'Oct',\n  'Nov',\n  'Dec',\n]\n\nexport const DEFAULT_LABELS = {\n  months: DEFAULT_MONTH_LABELS,\n  weekdays: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n  totalCount: '{{count}} activities in {{year}}',\n  legend: {\n    less: 'Less',\n    more: 'More',\n  },\n}\n","import { useEffect, useState } from 'react'\nimport type { ColorScheme } from '../types'\n\nconst query = '(prefers-color-scheme: dark)'\n\nexport function useColorScheme() {\n  const [colorScheme, setColorScheme] = useState<ColorScheme>(() =>\n    typeof window === 'undefined' ? 'light' : window.matchMedia(query).matches ? 'dark' : 'light',\n  )\n\n  const onChange = (event: MediaQueryListEvent) => {\n    setColorScheme(event.matches ? 'dark' : 'light')\n  }\n\n  useEffect(() => {\n    const mediaQuery = window.matchMedia(query)\n\n    // eslint-disable-next-line react-hooks/set-state-in-effect\n    setColorScheme(mediaQuery.matches ? 'dark' : 'light')\n\n    mediaQuery.addEventListener('change', onChange)\n\n    return () => {\n      mediaQuery.removeEventListener('change', onChange)\n    }\n  }, [])\n\n  return colorScheme\n}\n","import { useEffect, useState } from 'react'\nimport { NAMESPACE } from '../constants'\nimport type { ColorScheme } from '../types'\n\nexport const loadingAnimationName = `${NAMESPACE}--loading-animation`\n\nexport function useLoadingAnimation(zeroColor: string, colorScheme: ColorScheme) {\n  const [loaded, setLoaded] = useState(false)\n\n  useEffect(() => {\n    const colorLoading = `oklab(from ${zeroColor} l a b)`\n    const colorActive =\n      colorScheme === 'light'\n        ? `oklab(from ${zeroColor} calc(l * 0.96) a b)`\n        : `oklab(from ${zeroColor} calc(l * 1.08) a b)`\n\n    const style = document.createElement('style')\n    style.innerHTML = `\n      @keyframes ${loadingAnimationName} {\n        0% {\n          fill: ${colorLoading};\n        }\n        50% {\n          fill: ${colorActive};\n        }\n        100% {\n          fill: ${colorLoading};\n        }\n      }\n    `\n    const handleLoad = () => {\n      setLoaded(true)\n    }\n\n    document.head.appendChild(style)\n    style.addEventListener('load', handleLoad)\n\n    return () => {\n      document.head.removeChild(style)\n      style.removeEventListener('load', handleLoad)\n      setLoaded(false)\n    }\n  }, [zeroColor, colorScheme])\n\n  return loaded\n}\n","import { useEffect, useState } from 'react'\n\nconst query = '(prefers-reduced-motion: reduce)'\n\nexport function usePrefersReducedMotion() {\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(() =>\n    typeof window === 'undefined' ? true : window.matchMedia(query).matches,\n  )\n\n  useEffect(() => {\n    const mediaQuery = window.matchMedia(query)\n\n    // eslint-disable-next-line react-hooks/set-state-in-effect\n    setPrefersReducedMotion(mediaQuery.matches)\n\n    const onChange = (event: MediaQueryListEvent) => {\n      setPrefersReducedMotion(event.matches)\n    }\n\n    mediaQuery.addEventListener('change', onChange)\n\n    return () => {\n      mediaQuery.removeEventListener('change', onChange)\n    }\n  }, [])\n\n  return prefersReducedMotion\n}\n","import {\n  differenceInCalendarDays,\n  eachDayOfInterval,\n  endOfYear,\n  formatISO,\n  getDay,\n  isValid,\n  nextDay,\n  parseISO,\n  startOfYear,\n  subWeeks,\n} from 'date-fns'\nimport { NAMESPACE } from '../constants'\nimport type { Activity, DayIndex, Week } from '../types'\n\nexport function validateActivities(activities: Array<Activity>, maxLevel: number) {\n  if (activities.length === 0) {\n    throw new Error('Activity data must not be empty.')\n  }\n\n  for (const { date, level, count } of activities) {\n    if (!isValid(parseISO(date))) {\n      throw new Error(`Activity date '${date}' is not a valid ISO 8601 date string.`)\n    }\n\n    if (count < 0) {\n      throw new RangeError(`Activity count must not be negative, found ${count}.`)\n    }\n\n    if (level < 0 || level > maxLevel) {\n      throw new RangeError(\n        `Activity level ${level} for ${date} is out of range. It must be between 0 and ${maxLevel}.`,\n      )\n    }\n  }\n}\n\nexport function groupByWeeks(\n  activities: Array<Activity>,\n  weekStart: DayIndex = 0, // 0 = Sunday\n): Array<Week> {\n  const normalizedActivities = fillHoles(activities)\n\n  // Determine the first date of the calendar. If the first date is not the\n  // passed weekday, the respective weekday one week earlier is used.\n  const firstActivity = normalizedActivities[0] as Activity\n  const firstDate = parseISO(firstActivity.date)\n  const firstCalendarDate =\n    getDay(firstDate) === weekStart ? firstDate : subWeeks(nextDay(firstDate, weekStart), 1)\n\n  // To correctly group activities by week, it is necessary to left-pad the list\n  // because the first date might not be the set start weekday.\n  const paddedActivities = [\n    ...(Array(differenceInCalendarDays(firstDate, firstCalendarDate)).fill(\n      undefined,\n    ) as Array<Activity>),\n    ...normalizedActivities,\n  ]\n\n  const numberOfWeeks = Math.ceil(paddedActivities.length / 7)\n\n  // Finally, group activities by week\n  return range(numberOfWeeks).map(weekIndex =>\n    paddedActivities.slice(weekIndex * 7, weekIndex * 7 + 7),\n  )\n}\n\n/**\n * The calendar expects a continuous sequence of days,\n * so fill gaps with empty activity data.\n */\nfunction fillHoles(activities: Array<Activity>): Array<Activity> {\n  const calendar = new Map<string, Activity>(activities.map(a => [a.date, a]))\n  const firstActivity = activities[0] as Activity\n  const lastActivity = activities[activities.length - 1] as Activity\n\n  return eachDayOfInterval({\n    start: parseISO(firstActivity.date),\n    end: parseISO(lastActivity.date),\n  }).map(day => {\n    const date = formatISO(day, { representation: 'date' })\n\n    if (calendar.has(date)) {\n      return calendar.get(date) as Activity\n    }\n\n    return {\n      date,\n      count: 0,\n      level: 0,\n    }\n  })\n}\n\n/**\n * Following the BEM (block, element, modifier) naming convention\n * https://getbem.com/naming/\n */\nexport function getClassName(element: string) {\n  return `${NAMESPACE}__${element}`\n}\n\nexport function range(n: number) {\n  return [...Array(n).keys()]\n}\n\nexport function generateEmptyData(): Array<Activity> {\n  const year = new Date().getFullYear()\n  const days = eachDayOfInterval({\n    start: new Date(year, 0, 1),\n    end: new Date(year, 11, 31),\n  })\n\n  return days.map(date => ({\n    date: formatISO(date, { representation: 'date' }),\n    count: 0,\n    level: 0,\n  }))\n}\n\nexport function generateTestData(args: {\n  interval?: { start: Date; end: Date }\n  maxLevel?: number\n}): Array<Activity> {\n  const maxCount = 20\n  const maxLevel = args.maxLevel ? Math.max(1, args.maxLevel) : 4\n  const now = new Date()\n\n  const days = eachDayOfInterval(\n    args.interval ?? {\n      start: startOfYear(now),\n      end: endOfYear(now),\n    },\n  )\n\n  const noise = whiteNoise(days.length, maxLevel, v => 0.9 * Math.pow(v, 2))\n\n  return days.map((date, i) => {\n    const level = noise[i] as number\n\n    return {\n      date: formatISO(date, { representation: 'date' }),\n      count: Math.round(level * (maxCount / maxLevel)),\n      level,\n    }\n  })\n}\n\n// Deterministically generates n white noise values from 0 to max (inclusive).\nfunction whiteNoise(\n  n: number,\n  max: number,\n  transformFn: (v: number) => number = v => v,\n): Array<number> {\n  const seed = 54321\n  const random = mulberry32(seed)\n\n  return Array.from({ length: n }, () => {\n    const v = transformFn(random())\n    return Math.floor(v * (max + 1))\n  })\n}\n\n// Mulberry32 pseudorandom number generator\nfunction mulberry32(seed: number) {\n  let state = seed >>> 0 // ensure unsigned 32-bit integer\n\n  return () => {\n    state += 0x6d2b79f5\n    let r = Math.imul(state ^ (state >>> 15), 1 | state)\n    r ^= r + Math.imul(r ^ (r >>> 7), 61 | r)\n\n    return ((r ^ (r >>> 14)) >>> 0) / 4294967296\n  }\n}\n","import { getMonth, parseISO } from 'date-fns'\nimport type { Props } from '../components/ActivityCalendar'\nimport { DEFAULT_MONTH_LABELS } from '../constants'\nimport type { DayIndex, DayName, Week, WeekdayLabels } from '../types'\n\ntype MonthLabel = {\n  weekIndex: number\n  label: string\n}\n\nexport function getMonthLabels(\n  weeks: Array<Week>,\n  monthNames: Array<string> = DEFAULT_MONTH_LABELS,\n): Array<MonthLabel> {\n  return weeks\n    .reduce<Array<MonthLabel>>((labels, week, weekIndex) => {\n      const firstActivity = week.find(activity => activity !== undefined)\n\n      if (!firstActivity) {\n        throw new Error(`Unexpected error: Week ${weekIndex + 1} is empty.`)\n      }\n\n      const month = monthNames[getMonth(parseISO(firstActivity.date))]\n\n      if (!month) {\n        const monthName = new Date(firstActivity.date).toLocaleString('en-US', { month: 'short' })\n        throw new Error(`Unexpected error: undefined month label for ${monthName}.`)\n      }\n\n      const prevLabel = labels[labels.length - 1]\n\n      if (weekIndex === 0 || prevLabel?.label !== month) {\n        return [...labels, { weekIndex, label: month }]\n      }\n\n      return labels\n    }, [])\n    .filter(({ weekIndex }, index, labels) => {\n      // Labels should only be shown if there is \"enough\" space (data).\n      // This is a naive implementation that does not take the block size,\n      // font size, etc. into account.\n      const minWeeks = 3\n\n      // Skip the first month label if there is not enough space for the next one.\n      if (index === 0) {\n        return labels[1] && labels[1].weekIndex - weekIndex >= minWeeks\n      }\n\n      // Skip the last month label if there is not enough data in that month\n      // to avoid overflowing the calendar on the right.\n      if (index === labels.length - 1) {\n        return weeks.slice(weekIndex).length >= minWeeks\n      }\n\n      return true\n    })\n}\n\nexport function maxWeekdayLabelWidth(\n  labels: Array<string>,\n  showWeekdayLabel: WeekdayLabels,\n  fontSize: number,\n): number {\n  if (labels.length !== 7) {\n    throw new Error('Exactly 7 labels, one for each weekday must be passed.')\n  }\n\n  return labels.reduce(\n    (maxWidth, label, index) =>\n      showWeekdayLabel.byDayIndex(index as DayIndex)\n        ? Math.max(maxWidth, Math.ceil(calcTextDimensions(label, fontSize).width))\n        : maxWidth,\n    0,\n  )\n}\n\nexport function calcTextDimensions(text: string, fontSize: number) {\n  if (typeof document === 'undefined' || typeof window === 'undefined') {\n    return { width: 0, height: 0 }\n  }\n\n  if (fontSize < 1) {\n    throw new RangeError('fontSize must be positive')\n  }\n\n  if (text.length === 0) {\n    return { width: 0, height: 0 }\n  }\n\n  const namespace = 'http://www.w3.org/2000/svg'\n  const svg = document.createElementNS(namespace, 'svg')\n\n  svg.style.position = 'absolute'\n  svg.style.visibility = 'hidden'\n  svg.style.fontFamily = window.getComputedStyle(document.body).fontFamily\n  svg.style.fontSize = `${fontSize}px`\n\n  const textNode = document.createElementNS(namespace, 'text')\n  textNode.textContent = text\n\n  svg.appendChild(textNode)\n  document.body.appendChild(svg)\n  const boundingBox = textNode.getBBox()\n\n  document.body.removeChild(svg)\n\n  return { width: boundingBox.width, height: boundingBox.height }\n}\n\nexport function initWeekdayLabels(\n  input: Props['showWeekdayLabels'],\n  weekStart: DayIndex,\n): WeekdayLabels {\n  if (!input)\n    return {\n      byDayIndex: () => false,\n      shouldShow: false,\n    }\n\n  // Default: Show every second day of the week.\n  if (input === true) {\n    return {\n      byDayIndex: index => {\n        return ((7 + index - weekStart) % 7) % 2 !== 0\n      },\n      shouldShow: true,\n    }\n  }\n\n  const indexed: Array<boolean> = []\n  for (const name of input) {\n    const index = dayNameToIndex[name.toLowerCase() as DayName]\n    indexed[index] = true\n  }\n\n  return {\n    byDayIndex: index => indexed[index] ?? false,\n    shouldShow: input.length > 0,\n  }\n}\n\nconst dayNameToIndex: Record<DayName, DayIndex> = {\n  sun: 0,\n  mon: 1,\n  tue: 2,\n  wed: 3,\n  thu: 4,\n  fri: 5,\n  sat: 6,\n}\n","import type { Color, ColorScale, Theme, ThemeInput } from '../types'\nimport { range } from './calendar'\n\nexport function createTheme(input?: ThemeInput, steps = 5): Theme {\n  const defaultTheme = createDefaultTheme(steps)\n\n  if (input) {\n    validateThemeInput(input, steps)\n\n    input.light = input.light ?? defaultTheme.light\n    input.dark = input.dark ?? defaultTheme.dark\n\n    return {\n      light: isPair(input.light) ? calcColorScale(input.light, steps) : input.light,\n      dark: isPair(input.dark) ? calcColorScale(input.dark, steps) : input.dark,\n    }\n  }\n\n  return defaultTheme\n}\n\nfunction createDefaultTheme(steps: number): Theme {\n  return {\n    light: calcColorScale(['hsl(0, 0%, 92%)', 'hsl(0, 0%, 26%)'], steps),\n    dark: calcColorScale(['hsl(0, 0%, 22%)', 'hsl(0, 0%, 92%)'], steps),\n  }\n}\n\nfunction validateThemeInput(input: ThemeInput, steps: number) {\n  const maxLevelHint = 'The number of colors is controlled by the \"maxLevel\" property.'\n\n  if (typeof input !== 'object' || (input.light === undefined && input.dark === undefined)) {\n    throw new Error(\n      `The theme object must contain at least one of the fields \"light\" and \"dark\" with exactly 2 or ${steps} colors respectively. ${maxLevelHint}`,\n    )\n  }\n\n  if (input.light) {\n    const { length } = input.light\n    if (length !== 2 && length !== steps) {\n      throw new Error(\n        `theme.light must contain exactly 2 or ${steps} colors, ${length} passed. ${maxLevelHint}`,\n      )\n    }\n\n    for (const c of input.light) {\n      if (typeof window !== 'undefined' && !CSS.supports('color', c)) {\n        throw new Error(`Invalid color \"${c}\" passed. All CSS color formats are accepted.`)\n      }\n    }\n  }\n\n  if (input.dark) {\n    const { length } = input.dark\n    if (length !== 2 && length !== steps) {\n      throw new Error(\n        `theme.dark must contain exactly 2 or ${steps} colors, ${length} passed. ${maxLevelHint}`,\n      )\n    }\n\n    for (const c of input.dark) {\n      if (typeof window !== 'undefined' && !CSS.supports('color', c)) {\n        throw new Error(`Invalid color \"${c}\" passed. All CSS color formats are accepted.`)\n      }\n    }\n  }\n}\n\nfunction calcColorScale([start, end]: [Color, Color], steps: number): ColorScale {\n  return range(steps).map(i => {\n    // In the loading animation the zero color is used.\n    // However, Safari 16 crashes if a CSS color-mix expression like below is\n    // combined with relative color syntax to calculate a hue variation for the\n    // animation. Since the start and end colors do not need to be mixed, they\n    // can be returned directly to work around this issue.\n    switch (i) {\n      case 0:\n        return start\n      case steps - 1:\n        return end\n      default: {\n        const pos = (i / (steps - 1)) * 100\n        return `color-mix(in oklab, ${end} ${parseFloat(pos.toFixed(2))}%, ${start})`\n      }\n    }\n  })\n}\n\nfunction isPair<T>(val: Array<T>): val is [T, T] {\n  return val.length === 2\n}\n","import type { CSSProperties } from 'react'\nimport type { ColorScheme } from '../types'\n\nexport const styles = {\n  container: (fontSize: number) =>\n    ({\n      width: 'max-content', // Calendar should not grow\n      maxWidth: '100%', // Do not remove - parent might be a flexbox\n      display: 'flex',\n      flexDirection: 'column',\n      gap: '8px',\n      fontSize: `${fontSize}px`,\n    }) satisfies CSSProperties,\n  scrollContainer: (fontSize: number) =>\n    ({\n      maxWidth: '100%',\n      overflowX: 'auto',\n      overflowY: 'hidden',\n      paddingTop: Math.ceil(0.1 * fontSize), // SVG <text> overflows in Firefox at y=0\n    }) satisfies CSSProperties,\n  calendar: {\n    display: 'block', // SVGs are inline-block by default\n    overflow: 'visible', // Weekday labels are rendered left of the container\n  } satisfies CSSProperties,\n  rect: (colorScheme: ColorScheme) =>\n    ({\n      stroke: colorScheme === 'light' ? 'rgba(0, 0, 0, 0.08)' : 'rgba(255, 255, 255, 0.04)',\n    }) satisfies CSSProperties,\n  footer: {\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      gap: '4px 16px',\n      whiteSpace: 'nowrap',\n    } satisfies CSSProperties,\n    legend: {\n      marginLeft: 'auto',\n      display: 'flex',\n      alignItems: 'center',\n      gap: '3px',\n    } satisfies CSSProperties,\n  },\n}\n","'use client'\n\nimport {\n  forwardRef,\n  Fragment,\n  lazy,\n  Suspense,\n  useEffect,\n  useState,\n  type CSSProperties,\n  type ForwardedRef,\n  type ReactElement,\n} from 'react'\nimport { getYear, parseISO } from 'date-fns'\nimport { DEFAULT_LABELS, LABEL_MARGIN, NAMESPACE } from '../constants'\nimport { useColorScheme } from '../hooks/useColorScheme'\nimport { loadingAnimationName, useLoadingAnimation } from '../hooks/useLoadingAnimation'\nimport { usePrefersReducedMotion } from '../hooks/usePrefersReducedMotion'\nimport {\n  generateEmptyData,\n  getClassName,\n  groupByWeeks,\n  range,\n  validateActivities,\n} from '../lib/calendar'\nimport { getMonthLabels, initWeekdayLabels, maxWeekdayLabelWidth } from '../lib/label'\nimport { createTheme } from '../lib/theme'\nimport { styles } from '../styles/styles'\nimport type {\n  Activity,\n  BlockElement,\n  ColorScheme,\n  DayIndex,\n  DayName,\n  Labels,\n  ThemeInput,\n} from '../types'\nimport { type TooltipConfig } from './Tooltip'\n\nconst Tooltip = lazy(() => import('./Tooltip').then(module => ({ default: module.Tooltip })))\n\nexport type Props = {\n  /**\n   * List of calendar entries. Each `Activity` object requires an ISO 8601\n   * `date` string in the format `yyyy-MM-dd`, a `count` property with the\n   * amount of tracked data, and a `level` property in the range `0-maxLevel`\n   * to specify activity intensity. The `maxLevel` prop defaults to 4.\n   *\n   * Dates without corresponding entries are assumed to have no activity. This\n   * allows you to set arbitrary start and end dates for the calendar by passing\n   * empty entries as the first and last items.\n   *\n   * Example object:\n   *\n   * ```\n   * {\n   *   date: \"2021-02-20\",\n   *   count: 16,\n   *   level: 3\n   * }\n   * ```\n   */\n  data: Array<Activity>\n  /**\n   * Margin between blocks in pixels.\n   */\n  blockMargin?: number\n  /**\n   * Border radius of blocks in pixels.\n   */\n  blockRadius?: number\n  /**\n   * Block size in pixels.\n   */\n  blockSize?: number\n  /**\n   * Class name to add to the component container.\n   */\n  className?: string\n  /**\n   * Use the `'light'` or `'dark'` color scheme instead of the system one.\n   */\n  colorScheme?: ColorScheme\n  /**\n   * Font size for text in pixels.\n   */\n  fontSize?: number\n  /**\n   * Localization strings for all calendar labels.\n   *\n   * `totalCount` supports the placeholders `{{count}}` and `{{year}}`.\n   */\n  labels?: Labels\n  /**\n   * Maximum activity level (zero-indexed). 4 by default, 0 means \"no activity\".\n   */\n  maxLevel?: number\n  /**\n   * Toggle to display the calendar loading state. The `data` property is\n   * ignored if set.\n   */\n  loading?: boolean\n  /**\n   * Ref to access the calendar DOM node.\n   */\n  ref?: ForwardedRef<HTMLElement>\n  /**\n   * Render prop for calendar blocks (activities). For example, useful to\n   * attach event handlers or to wrap the element with a link. Use\n   * `React.cloneElement` to pass additional props to the element if necessary.\n   */\n  renderBlock?: (block: BlockElement, activity: Activity) => ReactElement\n  /**\n   * Render prop for color legend blocks. Use `React.cloneElement` to pass\n   * additional props to the element if necessary.\n   */\n  renderColorLegend?: (block: BlockElement, level: number) => ReactElement\n  /**\n   * Toggle to hide the color legend below the calendar.\n   */\n  showColorLegend?: boolean\n  /**\n   * Toggle to hide the month labels above the calendar.\n   */\n  showMonthLabels?: boolean\n  /**\n   * Toggle to hide the total count below the calendar.\n   */\n  showTotalCount?: boolean\n  /**\n   * Toggle to show weekday labels left to the calendar.\n   * Alternatively, provide an array of ISO 8601 weekday names to display.\n   * Example: `['mon', 'wed', 'fri']`.\n   */\n  showWeekdayLabels?: boolean | Array<DayName>\n  /**\n   * Style object to pass to the component container.\n   */\n  style?: CSSProperties\n  /**\n   * Set the calendar colors for the light and dark color schemes. Provide\n   * all colors per scheme explicitly (5 by default) or specify exactly two colors\n   * (the lowest and highest intensity) to calculate a single-hue scale. The\n   * number of colors is controlled by the `maxLevel` property. Colors can be\n   * specified in any valid CSS format.\n   *\n   * At least one scheme's colors must be set. If undefined, the default\n   * theme is used. By default, the calendar selects the current system color\n   * scheme, but you can enforce a specific scheme with the `colorScheme` prop.\n   *\n   * Example:\n   *\n   * ```tsx\n   * <ActivityCalendar\n   *   data={data}\n   *   theme={{\n   *     light: ['hsl(0, 0%, 92%)', 'firebrick'],\n   *     dark: ['#333', 'rgb(214, 16, 174)'],\n   *   }}\n   * />\n   * ```\n   *\n   */\n  theme?: ThemeInput\n  /**\n   * Tooltips to display when hovering over activity blocks or the color legend\n   * below the calendar. See the story for details about tooltip configuration.\n   */\n  tooltips?: {\n    activity?: TooltipConfig & {\n      text: (activity: Activity) => string\n    }\n    colorLegend?: TooltipConfig & {\n      text: (level: number) => string\n    }\n  }\n  /**\n   * Index of day to be used as start of week. 0 represents Sunday.\n   */\n  weekStart?: DayIndex\n}\n\nexport const ActivityCalendar = forwardRef<HTMLElement, Props>(\n  (\n    {\n      data: activities,\n      blockMargin = 4,\n      blockRadius = 2,\n      blockSize = 12,\n      className,\n      colorScheme: colorSchemeProp,\n      fontSize = 14,\n      labels: labelsProp,\n      loading = false,\n      maxLevel = 4,\n      renderBlock,\n      renderColorLegend,\n      showColorLegend = true,\n      showMonthLabels = true,\n      showTotalCount = true,\n      showWeekdayLabels = false,\n      style: styleProp = {},\n      theme: themeProp,\n      tooltips = {},\n      weekStart = 0, // Sunday\n    },\n    ref,\n  ) => {\n    const [isClient, setIsClient] = useState(false)\n    useEffect(() => {\n      setIsClient(true)\n    }, [])\n\n    maxLevel = Math.max(1, maxLevel)\n\n    const theme = createTheme(themeProp, maxLevel + 1)\n    const systemColorScheme = useColorScheme()\n    const colorScheme = colorSchemeProp ?? systemColorScheme\n    const colorScale = theme[colorScheme]\n\n    const animationLoaded = useLoadingAnimation(colorScale[0] as string, colorScheme)\n    const useAnimation = !usePrefersReducedMotion()\n\n    if (loading) {\n      // Only show the loading state once the CSS animation has been injected\n      // to avoid a flash of white with dark backgrounds.\n      if (useAnimation && !animationLoaded) {\n        return null\n      }\n\n      activities = generateEmptyData()\n    }\n\n    validateActivities(activities, maxLevel)\n\n    const firstActivity = activities[0] as Activity\n    const year = getYear(parseISO(firstActivity.date))\n    const weeks = groupByWeeks(activities, weekStart)\n\n    const labels = Object.assign({}, DEFAULT_LABELS, labelsProp)\n    const labelHeight = showMonthLabels ? fontSize + LABEL_MARGIN : 0\n\n    const weekdayLabels = initWeekdayLabels(showWeekdayLabels, weekStart)\n\n    // Must be calculated on the client, or SSR hydration errors will occur\n    // because server and client HTML would not match.\n    const weekdayLabelOffset =\n      isClient && weekdayLabels.shouldShow\n        ? maxWeekdayLabelWidth(labels.weekdays, weekdayLabels, fontSize) + LABEL_MARGIN\n        : undefined\n\n    function getDimensions() {\n      return {\n        width: weeks.length * (blockSize + blockMargin) - blockMargin,\n        height: labelHeight + (blockSize + blockMargin) * 7 - blockMargin,\n      }\n    }\n\n    function renderCalendar() {\n      return weeks\n        .map((week, weekIndex) =>\n          week.map((activity, dayIndex) => {\n            if (!activity) {\n              return null\n            }\n\n            const loadingAnimation =\n              loading && useAnimation\n                ? {\n                    animation: `${loadingAnimationName} 1.75s ease-in-out infinite`,\n                    animationDelay: `${weekIndex * 20 + dayIndex * 20}ms`,\n                  }\n                : undefined\n\n            const block = (\n              <rect\n                x={0}\n                y={labelHeight + (blockSize + blockMargin) * dayIndex}\n                width={blockSize}\n                height={blockSize}\n                rx={blockRadius}\n                ry={blockRadius}\n                fill={colorScale[activity.level]}\n                data-date={activity.date}\n                data-level={activity.level}\n                style={{\n                  ...styles.rect(colorScheme),\n                  ...loadingAnimation,\n                }}\n              />\n            )\n\n            const renderedBlock = renderBlock ? renderBlock(block, activity) : block\n\n            return (\n              <Fragment key={activity.date}>\n                {tooltips.activity ? (\n                  <Suspense fallback={renderedBlock}>\n                    <Tooltip\n                      text={tooltips.activity.text(activity)}\n                      colorScheme={colorScheme}\n                      placement={tooltips.activity.placement ?? 'top'}\n                      hoverRestMs={tooltips.activity.hoverRestMs}\n                      offset={tooltips.activity.offset}\n                      transitionStyles={tooltips.activity.transitionStyles}\n                      withArrow={tooltips.activity.withArrow}\n                    >\n                      {renderedBlock}\n                    </Tooltip>\n                  </Suspense>\n                ) : (\n                  renderedBlock\n                )}\n              </Fragment>\n            )\n          }),\n        )\n        .map((week, x) => (\n          <g key={x} transform={`translate(${(blockSize + blockMargin) * x}, 0)`}>\n            {week}\n          </g>\n        ))\n    }\n\n    function renderFooter() {\n      if (!showTotalCount && !showColorLegend) {\n        return null\n      }\n\n      const totalCount = activities.reduce((sum, activity) => sum + activity.count, 0)\n\n      return (\n        <footer\n          className={getClassName('footer')}\n          style={{ ...styles.footer.container, marginLeft: weekdayLabelOffset }}\n        >\n          {/* Placeholder */}\n          {loading && <div>&nbsp;</div>}\n\n          {!loading && showTotalCount && (\n            <div className={getClassName('count')}>\n              {labels.totalCount\n                ? labels.totalCount\n                    .replace('{{count}}', String(totalCount))\n                    .replace('{{year}}', String(year))\n                : `${totalCount} activities in ${year}`}\n            </div>\n          )}\n\n          {!loading && showColorLegend && (\n            <div className={getClassName('legend-colors')} style={styles.footer.legend}>\n              <span style={{ marginRight: '0.4em' }}>{labels.legend.less}</span>\n              {range(maxLevel + 1).map(level => {\n                const colorLegend = (\n                  <svg width={blockSize} height={blockSize} key={level}>\n                    <rect\n                      width={blockSize}\n                      height={blockSize}\n                      fill={colorScale[level]}\n                      rx={blockRadius}\n                      ry={blockRadius}\n                      style={styles.rect(colorScheme)}\n                    />\n                  </svg>\n                )\n\n                const renderedColorLegend = renderColorLegend\n                  ? renderColorLegend(colorLegend, level)\n                  : colorLegend\n\n                return (\n                  <Fragment key={level}>\n                    {tooltips.colorLegend ? (\n                      <Suspense fallback={renderedColorLegend}>\n                        <Tooltip\n                          text={tooltips.colorLegend.text(level)}\n                          colorScheme={colorScheme}\n                          placement={tooltips.colorLegend.placement ?? 'bottom'}\n                          hoverRestMs={tooltips.colorLegend.hoverRestMs}\n                          offset={tooltips.colorLegend.offset}\n                          transitionStyles={tooltips.colorLegend.transitionStyles}\n                          withArrow={tooltips.colorLegend.withArrow}\n                        >\n                          {renderedColorLegend}\n                        </Tooltip>\n                      </Suspense>\n                    ) : (\n                      renderedColorLegend\n                    )}\n                  </Fragment>\n                )\n              })}\n              <span style={{ marginLeft: '0.4em' }}>{labels.legend.more}</span>\n            </div>\n          )}\n        </footer>\n      )\n    }\n\n    function renderWeekdayLabels() {\n      if (!weekdayLabels.shouldShow) {\n        return null\n      }\n\n      return (\n        <g className={getClassName('legend-weekday')}>\n          {range(7).map(index => {\n            const dayIndex = ((index + weekStart) % 7) as DayIndex\n\n            if (!weekdayLabels.byDayIndex(dayIndex)) {\n              return null\n            }\n\n            return (\n              <text\n                x={-LABEL_MARGIN}\n                y={labelHeight + (blockSize + blockMargin) * index + blockSize / 2}\n                dominantBaseline=\"central\"\n                textAnchor=\"end\"\n                fill=\"currentColor\"\n                key={index}\n              >\n                {labels.weekdays[dayIndex]}\n              </text>\n            )\n          })}\n        </g>\n      )\n    }\n\n    function renderMonthLabels() {\n      if (!showMonthLabels) {\n        return null\n      }\n\n      return (\n        <g className={getClassName('legend-month')}>\n          {getMonthLabels(weeks, labels.months).map(({ label, weekIndex }) => (\n            <text\n              x={(blockSize + blockMargin) * weekIndex}\n              y={0}\n              dominantBaseline=\"hanging\"\n              fill=\"currentColor\"\n              key={weekIndex}\n            >\n              {label}\n            </text>\n          ))}\n        </g>\n      )\n    }\n\n    const { width, height } = getDimensions()\n\n    return (\n      <article\n        ref={ref}\n        className={`${NAMESPACE} ${className ?? ''}`.trim()}\n        style={{ ...styleProp, ...styles.container(fontSize) }}\n      >\n        <div className={getClassName('scroll-container')} style={styles.scrollContainer(fontSize)}>\n          <svg\n            width={width}\n            height={height}\n            viewBox={`0 0 ${width} ${height}`}\n            className={getClassName('calendar')}\n            style={{ ...styles.calendar, marginLeft: weekdayLabelOffset }}\n          >\n            {!loading && renderWeekdayLabels()}\n            {!loading && renderMonthLabels()}\n            {renderCalendar()}\n          </svg>\n        </div>\n        {renderFooter()}\n      </article>\n    )\n  },\n)\n\nActivityCalendar.displayName = 'ActivityCalendar'\n"],"names":["NAMESPACE","LABEL_MARGIN","DEFAULT_MONTH_LABELS","DEFAULT_LABELS","months","weekdays","totalCount","legend","less","more","query","useColorScheme","colorScheme","setColorScheme","useState","window","matchMedia","matches","onChange","event","useEffect","mediaQuery","addEventListener","removeEventListener","loadingAnimationName","useLoadingAnimation","zeroColor","loaded","setLoaded","colorLoading","colorActive","style","document","createElement","innerHTML","handleLoad","head","appendChild","removeChild","usePrefersReducedMotion","prefersReducedMotion","setPrefersReducedMotion","validateActivities","activities","maxLevel","length","Error","date","level","count","isValid","parseISO","RangeError","groupByWeeks","weekStart","normalizedActivities","fillHoles","firstActivity","firstDate","firstCalendarDate","getDay","subWeeks","nextDay","paddedActivities","Array","differenceInCalendarDays","fill","undefined","numberOfWeeks","Math","ceil","range","map","weekIndex","slice","calendar","Map","a","lastActivity","eachDayOfInterval","start","end","day","formatISO","representation","has","get","getClassName","element","n","keys","generateEmptyData","year","Date","getFullYear","days","getMonthLabels","weeks","monthNames","reduce","labels","week","find","activity","month","getMonth","monthName","toLocaleString","prevLabel","label","filter","index","minWeeks","maxWeekdayLabelWidth","showWeekdayLabel","fontSize","maxWidth","byDayIndex","max","calcTextDimensions","width","text","height","namespace","svg","createElementNS","position","visibility","fontFamily","getComputedStyle","body","textNode","textContent","boundingBox","getBBox","initWeekdayLabels","input","shouldShow","indexed","name","dayNameToIndex","toLowerCase","sun","mon","tue","wed","thu","fri","sat","createTheme","steps","defaultTheme","createDefaultTheme","validateThemeInput","light","dark","isPair","calcColorScale","maxLevelHint","c","CSS","supports","i","pos","parseFloat","toFixed","val","styles","container","display","flexDirection","gap","scrollContainer","overflowX","overflowY","paddingTop","overflow","rect","stroke","footer","flexWrap","whiteSpace","marginLeft","alignItems","Tooltip","lazy","then","module","default","ActivityCalendar","forwardRef","data","blockMargin","blockRadius","blockSize","className","colorSchemeProp","labelsProp","loading","renderBlock","renderColorLegend","showColorLegend","showMonthLabels","showTotalCount","showWeekdayLabels","styleProp","theme","themeProp","tooltips","ref","isClient","setIsClient","systemColorScheme","colorScale","animationLoaded","useAnimation","getYear","Object","assign","labelHeight","weekdayLabels","weekdayLabelOffset","getDimensions","renderCalendar","dayIndex","loadingAnimation","animation","animationDelay","block","_jsx","x","y","rx","ry","renderedBlock","Fragment","children","Suspense","fallback","placement","hoverRestMs","offset","transitionStyles","withArrow","transform","renderFooter","sum","_jsxs","replace","String","marginRight","colorLegend","renderedColorLegend","renderWeekdayLabels","dominantBaseline","textAnchor","renderMonthLabels","trim","viewBox","displayName"],"mappings":"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"}